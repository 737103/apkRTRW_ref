(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[909],{365:(e,t,a)=>{Promise.resolve().then(a.bind(a,555))},555:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var n=a(5155),s=a(2115),i=a(2177),r=a(221),l=a(927),c=a(4301),d=a(7120),m=a(5943),u=a(7223),o=a(6104),x=a(1115),h=a(285),p=a(6695),g=a(4165),f=a(7759),j=a(2523),v=a(8539),b=a(7481),y=a(7349),k=a(8856);let N=l.Ik({id:l.Yj().optional(),title:l.Yj().min(5,{message:"Judul harus diisi (minimal 5 karakter)."}),content:l.Yj().min(10,{message:"Konten pengumuman harus diisi (minimal 10 karakter)."}),timestamp:l.bz().optional()});function w(){let[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)(!1),[w,C]=(0,s.useState)(null),[P,B]=(0,s.useState)(!0),{toast:R}=(0,b.dj)(),I=(0,x.KR)(o.v$,"announcements");(0,s.useEffect)(()=>{B(!0);let e=(0,x.Zy)(I,e=>{let a=e.val(),n=[];if(a)for(let e in a)n.push({id:e,...a[e]});t(n.sort((e,t)=>t.timestamp-e.timestamp)),B(!1)},e=>{console.error("Gagal memuat pengumuman dari RTDB",e),R({title:"Gagal Memuat Data",description:"Tidak dapat memuat daftar pengumuman.",variant:"destructive"}),B(!1)});return()=>{(0,x.AU)(I,"value",e)}},[R]);let A=(0,i.mN)({resolver:(0,r.u)(N),defaultValues:{title:"",content:""}}),E=e=>{e||(C(null),A.reset()),l(e)},M=e=>{C(e),A.reset({title:e.title,content:e.content}),l(!0)},T=()=>{C(null),A.reset({title:"",content:""}),l(!0)},D=async e=>{try{if(w){let t=(0,x.KR)(o.v$,"announcements/".concat(w.id));await (0,x.yo)(t,{title:e.title,content:e.content,timestamp:(0,x.O5)()}),R({title:"Pengumuman Diperbarui",description:'Pengumuman "'.concat(e.title,'" berhasil diperbarui.')})}else await (0,x.VC)(I,{title:e.title,content:e.content,timestamp:(0,x.O5)()}),R({title:"Pengumuman Diterbitkan",description:'Pengumuman "'.concat(e.title,'" berhasil diterbitkan.')});E(!1)}catch(e){console.error("Gagal menyimpan pengumuman",e),R({title:"Gagal Menyimpan",description:"Terjadi kesalahan saat menyimpan data pengumuman.",variant:"destructive"})}},F=async e=>{try{let t=(0,x.KR)(o.v$,"announcements/".concat(e));await (0,x.TF)(t),R({title:"Pengumuman Dihapus",description:"Pengumuman telah berhasil dihapus.",variant:"default"})}catch(e){console.error("Gagal menghapus pengumuman",e),R({title:"Gagal Menghapus",description:"Terjadi kesalahan saat menghapus pengumuman.",variant:"destructive"})}},$=e=>new Date(e).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,n.jsxs)("div",{className:"space-y-6 animate-in fade-in-50",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Kelola Pengumuman"}),(0,n.jsx)("p",{className:"text-lg text-muted-foreground",children:"Buat, edit, dan hapus pengumuman untuk pengguna."})]}),(0,n.jsxs)(h.$,{onClick:T,children:[(0,n.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"Buat Pengumuman"]})]}),(0,n.jsx)(g.lG,{open:a,onOpenChange:E,children:(0,n.jsxs)(g.Cf,{className:"sm:max-w-[480px]",children:[(0,n.jsxs)(g.c7,{children:[(0,n.jsx)(g.L3,{children:w?"Edit Pengumuman":"Buat Pengumuman Baru"}),(0,n.jsx)(g.rr,{children:w?"Ubah detail pengumuman di bawah ini.":"Isi detail untuk membuat pengumuman baru."})]}),(0,n.jsx)(f.lV,{...A,children:(0,n.jsxs)("form",{onSubmit:A.handleSubmit(D),className:"space-y-4 py-4",children:[(0,n.jsx)(f.zB,{control:A.control,name:"title",render:e=>{let{field:t}=e;return(0,n.jsxs)(f.eI,{children:[(0,n.jsx)(f.lR,{children:"Judul"}),(0,n.jsx)(f.MJ,{children:(0,n.jsx)(j.p,{placeholder:"cth., Kerja Bakti Lingkungan",...t})}),(0,n.jsx)(f.C5,{})]})}}),(0,n.jsx)(f.zB,{control:A.control,name:"content",render:e=>{let{field:t}=e;return(0,n.jsxs)(f.eI,{children:[(0,n.jsx)(f.lR,{children:"Isi Pengumuman"}),(0,n.jsx)(f.MJ,{children:(0,n.jsx)(v.T,{placeholder:"Tulis isi pengumuman di sini...",className:"min-h-[120px]",...t})}),(0,n.jsx)(f.C5,{})]})}}),(0,n.jsxs)(g.Es,{children:[(0,n.jsx)(h.$,{type:"button",variant:"outline",onClick:()=>E(!1),children:"Batal"}),(0,n.jsx)(h.$,{type:"submit",children:"Simpan"})]})]})})]})}),(0,n.jsxs)(p.Zp,{className:"shadow-lg",children:[(0,n.jsxs)(p.aR,{children:[(0,n.jsxs)(p.ZB,{className:"text-2xl flex items-center gap-2",children:[(0,n.jsx)(d.A,{}),"Daftar Pengumuman"]}),(0,n.jsx)(p.BT,{children:"Berikut adalah daftar semua pengumuman yang telah diterbitkan."})]}),(0,n.jsx)(p.Wu,{children:P?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(k.E,{className:"h-24 w-full"}),(0,n.jsx)(k.E,{className:"h-24 w-full"}),(0,n.jsx)(k.E,{className:"h-24 w-full"})]}):e.length>0?(0,n.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,n.jsxs)(p.Zp,{className:"bg-muted/30",children:[(0,n.jsxs)(p.aR,{children:[(0,n.jsxs)(p.ZB,{className:"flex justify-between items-start",children:[(0,n.jsx)("span",{className:"text-lg",children:e.title}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsxs)(h.$,{variant:"ghost",size:"icon",onClick:()=>M(e),children:[(0,n.jsx)(m.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Edit"})]}),(0,n.jsxs)(y.Lt,{children:[(0,n.jsx)(y.tv,{asChild:!0,children:(0,n.jsxs)(h.$,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:[(0,n.jsx)(u.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Hapus"})]})}),(0,n.jsxs)(y.EO,{children:[(0,n.jsxs)(y.wd,{children:[(0,n.jsx)(y.r7,{children:"Apakah Anda yakin?"}),(0,n.jsx)(y.$v,{children:"Tindakan ini tidak dapat diurungkan. Ini akan menghapus pengumuman secara permanen."})]}),(0,n.jsxs)(y.ck,{children:[(0,n.jsx)(y.Zr,{children:"Batal"}),(0,n.jsx)(y.Rx,{onClick:()=>F(e.id),className:"bg-destructive hover:bg-destructive/90",children:"Hapus"})]})]})]})]})]}),(0,n.jsx)(p.BT,{children:e.timestamp?$(e.timestamp):"Tanggal tidak tersedia"})]}),(0,n.jsx)(p.Wu,{children:(0,n.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:e.content})})]},e.id))}):(0,n.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,n.jsx)("p",{children:"Belum ada pengumuman yang diterbitkan."}),(0,n.jsxs)(h.$,{variant:"link",className:"mt-2",onClick:T,children:[(0,n.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"Buat Pengumuman Pertama"]})]})})]})]})}},2523:(e,t,a)=>{"use strict";a.d(t,{p:()=>r});var n=a(5155),s=a(2115),i=a(9434);let r=s.forwardRef((e,t)=>{let{className:a,type:s,...r}=e;return(0,n.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});r.displayName="Input"},4301:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(157).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},5943:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(157).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},7120:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(157).A)("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]])},7759:(e,t,a)=>{"use strict";a.d(t,{C5:()=>j,MJ:()=>g,Rr:()=>f,eI:()=>h,lR:()=>p,lV:()=>d,zB:()=>u});var n=a(5155),s=a(2115),i=a(9708),r=a(2177),l=a(9434),c=a(5057);let d=r.Op,m=s.createContext({}),u=e=>{let{...t}=e;return(0,n.jsx)(m.Provider,{value:{name:t.name},children:(0,n.jsx)(r.xI,{...t})})},o=()=>{let e=s.useContext(m),t=s.useContext(x),{getFieldState:a,formState:n}=(0,r.xW)(),i=a(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...i}},x=s.createContext({}),h=s.forwardRef((e,t)=>{let{className:a,...i}=e,r=s.useId();return(0,n.jsx)(x.Provider,{value:{id:r},children:(0,n.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",a),...i})})});h.displayName="FormItem";let p=s.forwardRef((e,t)=>{let{className:a,...s}=e,{error:i,formItemId:r}=o();return(0,n.jsx)(c.J,{ref:t,className:(0,l.cn)(i&&"text-destructive",a),htmlFor:r,...s})});p.displayName="FormLabel";let g=s.forwardRef((e,t)=>{let{...a}=e,{error:s,formItemId:r,formDescriptionId:l,formMessageId:c}=o();return(0,n.jsx)(i.DX,{ref:t,id:r,"aria-describedby":s?"".concat(l," ").concat(c):"".concat(l),"aria-invalid":!!s,...a})});g.displayName="FormControl";let f=s.forwardRef((e,t)=>{let{className:a,...s}=e,{formDescriptionId:i}=o();return(0,n.jsx)("p",{ref:t,id:i,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});f.displayName="FormDescription";let j=s.forwardRef((e,t)=>{var a;let{className:s,children:i,...r}=e,{error:c,formMessageId:d}=o(),m=c?String(null!=(a=null==c?void 0:c.message)?a:""):i;return m?(0,n.jsx)("p",{ref:t,id:d,className:(0,l.cn)("text-sm font-medium text-destructive",s),...r,children:m}):null});j.displayName="FormMessage"},8539:(e,t,a)=>{"use strict";a.d(t,{T:()=>r});var n=a(5155),s=a(2115),i=a(9434);let r=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...s})});r.displayName="Textarea"},8856:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var n=a(5155),s=a(9434);function i(e){let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",t),...a})}}},e=>{var t=t=>e(e.s=t);e.O(0,[507,138,277,687,48,587,443,754,612,441,684,358],()=>t(365)),_N_E=e.O()}]);