(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[909],{365:(e,a,t)=>{Promise.resolve().then(t.bind(t,555))},555:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>y});var n=t(5155),s=t(2115),r=t(2177),i=t(221),l=t(927),d=t(4301),c=t(7120),u=t(5943),m=t(7223),o=t(285),x=t(6695),h=t(4165),p=t(7759),g=t(2523),f=t(8539),j=t(7481),b=t(7349);let v="rt-rw-announcements",k=l.Ik({id:l.Yj().optional(),title:l.Yj().min(5,{message:"Judul harus diisi (minimal 5 karakter)."}),content:l.Yj().min(10,{message:"Konten pengumuman harus diisi (minimal 10 karakter)."}),date:l.Yj().optional()});function y(){let[e,a]=(0,s.useState)([]),[t,l]=(0,s.useState)(!1),[y,N]=(0,s.useState)(null),{toast:w}=(0,j.dj)();(0,s.useEffect)(()=>{try{let e=localStorage.getItem(v);e&&a(JSON.parse(e))}catch(e){console.error("Failed to load announcements from localStorage",e),w({title:"Gagal Memuat Data",description:"Tidak dapat memuat daftar pengumuman.",variant:"destructive"})}},[w]);let C=(0,r.mN)({resolver:(0,i.u)(k),defaultValues:{title:"",content:""}}),I=e=>{e||(N(null),C.reset()),l(e)},P=e=>{N(e),C.reset(e),l(!0)},B=()=>{N(null),C.reset({title:"",content:""}),l(!0)},S=t=>{try{let n=e.filter(e=>e.id!==t);a(n),localStorage.setItem(v,JSON.stringify(n)),w({title:"Pengumuman Dihapus",description:"Pengumuman telah berhasil dihapus.",variant:"default"})}catch(e){console.error("Failed to delete announcement",e),w({title:"Gagal Menghapus",description:"Terjadi kesalahan saat menghapus pengumuman.",variant:"destructive"})}};return(0,n.jsxs)("div",{className:"space-y-6 animate-in fade-in-50",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-4xl font-bold tracking-tight",children:"Kelola Pengumuman"}),(0,n.jsx)("p",{className:"text-lg text-muted-foreground",children:"Buat, edit, dan hapus pengumuman untuk pengguna."})]}),(0,n.jsxs)(o.$,{onClick:B,children:[(0,n.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Buat Pengumuman"]})]}),(0,n.jsx)(h.lG,{open:t,onOpenChange:I,children:(0,n.jsxs)(h.Cf,{className:"sm:max-w-[480px]",children:[(0,n.jsxs)(h.c7,{children:[(0,n.jsx)(h.L3,{children:y?"Edit Pengumuman":"Buat Pengumuman Baru"}),(0,n.jsx)(h.rr,{children:y?"Ubah detail pengumuman di bawah ini.":"Isi detail untuk membuat pengumuman baru."})]}),(0,n.jsx)(p.lV,{...C,children:(0,n.jsxs)("form",{onSubmit:C.handleSubmit(t=>{try{let n,s=new Date().toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"});if(y)n=e.map(e=>e.id===y.id?{...y,...t,date:e.date||s}:e),w({title:"Pengumuman Diperbarui",description:'Pengumuman "'.concat(t.title,'" berhasil diperbarui.')});else{let a={...t,id:"announcement-".concat(new Date().getTime()),date:s};n=[a,...e],w({title:"Pengumuman Diterbitkan",description:'Pengumuman "'.concat(a.title,'" berhasil diterbitkan.')})}a(n),localStorage.setItem(v,JSON.stringify(n)),I(!1)}catch(e){console.error("Failed to save announcement",e),w({title:"Gagal Menyimpan",description:"Terjadi kesalahan saat menyimpan data pengumuman.",variant:"destructive"})}}),className:"space-y-4 py-4",children:[(0,n.jsx)(p.zB,{control:C.control,name:"title",render:e=>{let{field:a}=e;return(0,n.jsxs)(p.eI,{children:[(0,n.jsx)(p.lR,{children:"Judul"}),(0,n.jsx)(p.MJ,{children:(0,n.jsx)(g.p,{placeholder:"cth., Kerja Bakti Lingkungan",...a})}),(0,n.jsx)(p.C5,{})]})}}),(0,n.jsx)(p.zB,{control:C.control,name:"content",render:e=>{let{field:a}=e;return(0,n.jsxs)(p.eI,{children:[(0,n.jsx)(p.lR,{children:"Isi Pengumuman"}),(0,n.jsx)(p.MJ,{children:(0,n.jsx)(f.T,{placeholder:"Tulis isi pengumuman di sini...",className:"min-h-[120px]",...a})}),(0,n.jsx)(p.C5,{})]})}}),(0,n.jsxs)(h.Es,{children:[(0,n.jsx)(o.$,{type:"button",variant:"outline",onClick:()=>I(!1),children:"Batal"}),(0,n.jsx)(o.$,{type:"submit",children:"Simpan"})]})]})})]})}),(0,n.jsxs)(x.Zp,{className:"shadow-lg",children:[(0,n.jsxs)(x.aR,{children:[(0,n.jsxs)(x.ZB,{className:"text-2xl flex items-center gap-2",children:[(0,n.jsx)(c.A,{}),"Daftar Pengumuman"]}),(0,n.jsx)(x.BT,{children:"Berikut adalah daftar semua pengumuman yang telah diterbitkan."})]}),(0,n.jsx)(x.Wu,{children:e.length>0?(0,n.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,n.jsxs)(x.Zp,{className:"bg-muted/30",children:[(0,n.jsxs)(x.aR,{children:[(0,n.jsxs)(x.ZB,{className:"flex justify-between items-start",children:[(0,n.jsx)("span",{children:e.title}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsxs)(o.$,{variant:"ghost",size:"icon",onClick:()=>P(e),children:[(0,n.jsx)(u.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Edit"})]}),(0,n.jsxs)(b.Lt,{children:[(0,n.jsx)(b.tv,{asChild:!0,children:(0,n.jsxs)(o.$,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:[(0,n.jsx)(m.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Hapus"})]})}),(0,n.jsxs)(b.EO,{children:[(0,n.jsxs)(b.wd,{children:[(0,n.jsx)(b.r7,{children:"Apakah Anda yakin?"}),(0,n.jsx)(b.$v,{children:"Tindakan ini tidak dapat diurungkan. Ini akan menghapus pengumuman secara permanen."})]}),(0,n.jsxs)(b.ck,{children:[(0,n.jsx)(b.Zr,{children:"Batal"}),(0,n.jsx)(b.Rx,{onClick:()=>S(e.id),className:"bg-destructive hover:bg-destructive/90",children:"Hapus"})]})]})]})]})]}),(0,n.jsx)(x.BT,{children:e.date||"Tanggal tidak tersedia"})]}),(0,n.jsx)(x.Wu,{children:(0,n.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:e.content})})]},e.id))}):(0,n.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,n.jsx)("p",{children:"Belum ada pengumuman yang diterbitkan."}),(0,n.jsxs)(o.$,{variant:"link",className:"mt-2",onClick:B,children:[(0,n.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Buat Pengumuman Pertama"]})]})})]})]})}},2523:(e,a,t)=>{"use strict";t.d(a,{p:()=>i});var n=t(5155),s=t(2115),r=t(9434);let i=s.forwardRef((e,a)=>{let{className:t,type:s,...i}=e;return(0,n.jsx)("input",{type:s,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...i})});i.displayName="Input"},4301:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});let n=(0,t(157).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},5943:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});let n=(0,t(157).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},7120:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});let n=(0,t(157).A)("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]])},7759:(e,a,t)=>{"use strict";t.d(a,{C5:()=>j,MJ:()=>g,Rr:()=>f,eI:()=>h,lR:()=>p,lV:()=>c,zB:()=>m});var n=t(5155),s=t(2115),r=t(9708),i=t(2177),l=t(9434),d=t(5057);let c=i.Op,u=s.createContext({}),m=e=>{let{...a}=e;return(0,n.jsx)(u.Provider,{value:{name:a.name},children:(0,n.jsx)(i.xI,{...a})})},o=()=>{let e=s.useContext(u),a=s.useContext(x),{getFieldState:t,formState:n}=(0,i.xW)(),r=t(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=a;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...r}},x=s.createContext({}),h=s.forwardRef((e,a)=>{let{className:t,...r}=e,i=s.useId();return(0,n.jsx)(x.Provider,{value:{id:i},children:(0,n.jsx)("div",{ref:a,className:(0,l.cn)("space-y-2",t),...r})})});h.displayName="FormItem";let p=s.forwardRef((e,a)=>{let{className:t,...s}=e,{error:r,formItemId:i}=o();return(0,n.jsx)(d.J,{ref:a,className:(0,l.cn)(r&&"text-destructive",t),htmlFor:i,...s})});p.displayName="FormLabel";let g=s.forwardRef((e,a)=>{let{...t}=e,{error:s,formItemId:i,formDescriptionId:l,formMessageId:d}=o();return(0,n.jsx)(r.DX,{ref:a,id:i,"aria-describedby":s?"".concat(l," ").concat(d):"".concat(l),"aria-invalid":!!s,...t})});g.displayName="FormControl";let f=s.forwardRef((e,a)=>{let{className:t,...s}=e,{formDescriptionId:r}=o();return(0,n.jsx)("p",{ref:a,id:r,className:(0,l.cn)("text-sm text-muted-foreground",t),...s})});f.displayName="FormDescription";let j=s.forwardRef((e,a)=>{var t;let{className:s,children:r,...i}=e,{error:d,formMessageId:c}=o(),u=d?String(null!=(t=null==d?void 0:d.message)?t:""):r;return u?(0,n.jsx)("p",{ref:a,id:c,className:(0,l.cn)("text-sm font-medium text-destructive",s),...i,children:u}):null});j.displayName="FormMessage"},8539:(e,a,t)=>{"use strict";t.d(a,{T:()=>i});var n=t(5155),s=t(2115),r=t(9434);let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...s})});i.displayName="Textarea"}},e=>{var a=a=>e(e.s=a);e.O(0,[769,676,756,443,754,665,441,684,358],()=>a(365)),_N_E=e.O()}]);